<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_201) on Thu Mar 28 15:17:36 AEDT 2019 -->
<title>FileSystemManager</title>
<meta name="date" content="2019-03-28">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="FileSystemManager";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../unimelb/bitbox/util/Document.html" title="class in unimelb.bitbox.util"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../unimelb/bitbox/util/FileSystemManager.EVENT.html" title="enum in unimelb.bitbox.util"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?unimelb/bitbox/util/FileSystemManager.html" target="_top">Frames</a></li>
<li><a href="FileSystemManager.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">unimelb.bitbox.util</div>
<h2 title="Class FileSystemManager" class="title">Class FileSystemManager</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>java.lang.Thread</li>
<li>
<ul class="inheritance">
<li>unimelb.bitbox.util.FileSystemManager</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd>java.lang.Runnable</dd>
</dl>
<hr>
<br>
<pre>public class <span class="typeNameLabel">FileSystemManager</span>
extends java.lang.Thread</pre>
<div class="block">A file system manager, that recursively monitors a given share directory,
 and emits events when files and directories change. The order that events are emitted
 in is natural in the sense that may be reproduced in the order supplied on a remote
 system without reordering required. E.g. if a nested directory structure is deleted,
 then the deepest deletions are always given first, up to the shallowest deletions. Similarly
 when creating nested directories, and for files that appear in directories.
 <br/>
 The file system manager also provides an API
 for safely making modifications to the files and directories in the share directory:
 <li><a href="../../../unimelb/bitbox/util/FileSystemManager.html#cancelFileLoader-java.lang.String-"><code>cancelFileLoader(String)</code></a></li>
 <li><code>#createFileLoader(String, String)</code></li>
 <li><a href="../../../unimelb/bitbox/util/FileSystemManager.html#checkShortcut-java.lang.String-"><code>checkShortcut(String)</code></a></li>
 <li><a href="../../../unimelb/bitbox/util/FileSystemManager.html#checkWriteComplete-java.lang.String-"><code>checkWriteComplete(String)</code></a></li>
 <li><a href="../../../unimelb/bitbox/util/FileSystemManager.html#deleteDirectory-java.lang.String-"><code>deleteDirectory(String)</code></a></li>
 <li><code>#deleteFile(String, long)</code></li>
 <li><a href="../../../unimelb/bitbox/util/FileSystemManager.html#dirNameExists-java.lang.String-"><code>dirNameExists(String)</code></a></li>
 <li><a href="../../../unimelb/bitbox/util/FileSystemManager.html#fileNameExists-java.lang.String-"><code>fileNameExists(String)</code></a></li>
 <li><a href="../../../unimelb/bitbox/util/FileSystemManager.html#fileNameExists-java.lang.String-java.lang.String-"><code>fileNameExists(String, String)</code></a></li>
 <li><a href="../../../unimelb/bitbox/util/FileSystemManager.html#generateSyncEvents--"><code>generateSyncEvents()</code></a></li>
 <li><a href="../../../unimelb/bitbox/util/FileSystemManager.html#isSafePathName-java.lang.String-"><code>isSafePathName(String)</code></a></li>
 <li><a href="../../../unimelb/bitbox/util/FileSystemManager.html#readFile-java.lang.String-long-long-"><code>readFile(String, long, long)</code></a></li>
 <li><a href="../../../unimelb/bitbox/util/FileSystemManager.html#makeDirectory-java.lang.String-"><code>makeDirectory(String)</code></a></li>
 <li><a href="../../../unimelb/bitbox/util/FileSystemManager.html#modifyFileLoader-java.lang.String-java.lang.String-long-"><code>modifyFileLoader(String, String, long)</code></a></li>
 <li><a href="../../../unimelb/bitbox/util/FileSystemManager.html#writeFile-java.lang.String-java.nio.ByteBuffer-long-"><code>writeFile(String, ByteBuffer, long)</code></a></li></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../unimelb/bitbox/util/FileSystemManager.EVENT.html" title="enum in unimelb.bitbox.util">FileSystemManager.EVENT</a></span></code>
<div class="block">Possible file system events.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../unimelb/bitbox/util/FileSystemManager.FileDescriptor.html" title="class in unimelb.bitbox.util">FileSystemManager.FileDescriptor</a></span></code>
<div class="block">Additional information about a given file.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../unimelb/bitbox/util/FileSystemManager.FileSystemEvent.html" title="class in unimelb.bitbox.util">FileSystemManager.FileSystemEvent</a></span></code>
<div class="block">Describes the case when a file is
 created/deleted/modified or when a directory is created/deleted.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="nested.classes.inherited.from.class.java.lang.Thread">
<!--   -->
</a>
<h3>Nested classes/interfaces inherited from class&nbsp;java.lang.Thread</h3>
<code>java.lang.Thread.State, java.lang.Thread.UncaughtExceptionHandler</code></li>
</ul>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../unimelb/bitbox/util/FileSystemManager.html#loadingSuffix">loadingSuffix</a></span></code>
<div class="block">The special suffix on file names for loading files.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="fields.inherited.from.class.java.lang.Thread">
<!--   -->
</a>
<h3>Fields inherited from class&nbsp;java.lang.Thread</h3>
<code>MAX_PRIORITY, MIN_PRIORITY, NORM_PRIORITY</code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../unimelb/bitbox/util/FileSystemManager.html#FileSystemManager-java.lang.String-unimelb.bitbox.util.FileSystemObserver-">FileSystemManager</a></span>(java.lang.String&nbsp;root,
                 <a href="../../../unimelb/bitbox/util/FileSystemObserver.html" title="interface in unimelb.bitbox.util">FileSystemObserver</a>&nbsp;fileSystemObserver)</code>
<div class="block">Construct a new file system manager.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../unimelb/bitbox/util/FileSystemManager.html#cancelFileLoader-java.lang.String-">cancelFileLoader</a></span>(java.lang.String&nbsp;pathName)</code>
<div class="block">Cancel a file loader.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../unimelb/bitbox/util/FileSystemManager.html#checkShortcut-java.lang.String-">checkShortcut</a></span>(java.lang.String&nbsp;pathName)</code>
<div class="block">Should be called directly after creating a file loader, but can be called at any time.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../unimelb/bitbox/util/FileSystemManager.html#checkWriteComplete-java.lang.String-">checkWriteComplete</a></span>(java.lang.String&nbsp;pathName)</code>
<div class="block">Requests the file loader for the associated file name to check if all of the content for the file
 has been written.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../unimelb/bitbox/util/FileSystemManager.html#createFileLoader-java.lang.String-java.lang.String-long-long-">createFileLoader</a></span>(java.lang.String&nbsp;pathName,
                java.lang.String&nbsp;md5,
                long&nbsp;length,
                long&nbsp;lastModified)</code>
<div class="block">Create a file loader for given file name.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../unimelb/bitbox/util/FileSystemManager.html#deleteDirectory-java.lang.String-">deleteDirectory</a></span>(java.lang.String&nbsp;pathName)</code>
<div class="block">Attempts to delete a directory, the directory must be
 empty.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../unimelb/bitbox/util/FileSystemManager.html#deleteFile-java.lang.String-long-java.lang.String-">deleteFile</a></span>(java.lang.String&nbsp;pathName,
          long&nbsp;lastModified,
          java.lang.String&nbsp;md5)</code>
<div class="block">Attempt to delete a file.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../unimelb/bitbox/util/FileSystemManager.html#dirNameExists-java.lang.String-">dirNameExists</a></span>(java.lang.String&nbsp;pathName)</code>
<div class="block">Returns true if the directory name exists.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../unimelb/bitbox/util/FileSystemManager.html#fileNameExists-java.lang.String-">fileNameExists</a></span>(java.lang.String&nbsp;pathName)</code>
<div class="block">Test if the file exists, ignoring the contents of the file.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../unimelb/bitbox/util/FileSystemManager.html#fileNameExists-java.lang.String-java.lang.String-">fileNameExists</a></span>(java.lang.String&nbsp;pathName,
              java.lang.String&nbsp;md5)</code>
<div class="block">Test if the file exists and is has matching content.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>java.util.ArrayList&lt;<a href="../../../unimelb/bitbox/util/FileSystemManager.FileSystemEvent.html" title="class in unimelb.bitbox.util">FileSystemManager.FileSystemEvent</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../unimelb/bitbox/util/FileSystemManager.html#generateSyncEvents--">generateSyncEvents</a></span>()</code>
<div class="block">Typically called at the beginning of a connection, in order to ensure that
 the remote directory has all of the same contents as the local directory.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../unimelb/bitbox/util/FileSystemManager.html#isSafePathName-java.lang.String-">isSafePathName</a></span>(java.lang.String&nbsp;pathName)</code>
<div class="block">Returns true if the path name is "safe" to be used.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../unimelb/bitbox/util/FileSystemManager.html#makeDirectory-java.lang.String-">makeDirectory</a></span>(java.lang.String&nbsp;pathName)</code>
<div class="block">Attempts to make a directory, the parent of the directory
 must already exist.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../unimelb/bitbox/util/FileSystemManager.html#modifyFileLoader-java.lang.String-java.lang.String-long-">modifyFileLoader</a></span>(java.lang.String&nbsp;pathName,
                java.lang.String&nbsp;md5,
                long&nbsp;lastModified)</code>
<div class="block">Called to create a file loader in the case when a file name already exists.</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>java.nio.ByteBuffer</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../unimelb/bitbox/util/FileSystemManager.html#readFile-java.lang.String-long-long-">readFile</a></span>(java.lang.String&nbsp;md5,
        long&nbsp;position,
        long&nbsp;length)</code>
<div class="block">Read bytes from any file containing the matching specific content.</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../unimelb/bitbox/util/FileSystemManager.html#run--">run</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../unimelb/bitbox/util/FileSystemManager.html#writeFile-java.lang.String-java.nio.ByteBuffer-long-">writeFile</a></span>(java.lang.String&nbsp;pathName,
         java.nio.ByteBuffer&nbsp;src,
         long&nbsp;position)</code>
<div class="block">Requests the file loader for the associated file name to write the supplied byte buffer
 at the supplied position in the loader file.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Thread">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Thread</h3>
<code>activeCount, checkAccess, countStackFrames, currentThread, destroy, dumpStack, enumerate, getAllStackTraces, getContextClassLoader, getDefaultUncaughtExceptionHandler, getId, getName, getPriority, getStackTrace, getState, getThreadGroup, getUncaughtExceptionHandler, holdsLock, interrupt, interrupted, isAlive, isDaemon, isInterrupted, join, join, join, resume, setContextClassLoader, setDaemon, setDefaultUncaughtExceptionHandler, setName, setPriority, setUncaughtExceptionHandler, sleep, sleep, start, stop, stop, suspend, toString, yield</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>equals, getClass, hashCode, notify, notifyAll, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="loadingSuffix">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>loadingSuffix</h4>
<pre>public final&nbsp;java.lang.String loadingSuffix</pre>
<div class="block">The special suffix on file names for loading files. Any files in the
 share directory with this suffix will never generate file system events,
 as they are ignored by the file system monitor.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../constant-values.html#unimelb.bitbox.util.FileSystemManager.loadingSuffix">Constant Field Values</a></dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="FileSystemManager-java.lang.String-unimelb.bitbox.util.FileSystemObserver-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>FileSystemManager</h4>
<pre>public&nbsp;FileSystemManager(java.lang.String&nbsp;root,
                         <a href="../../../unimelb/bitbox/util/FileSystemObserver.html" title="interface in unimelb.bitbox.util">FileSystemObserver</a>&nbsp;fileSystemObserver)
                  throws java.io.IOException,
                         java.security.NoSuchAlgorithmException</pre>
<div class="block">Construct a new file system manager. If the supplied share directory is not a directory
 that exists then the constructor will return without starting the monitor thread.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>root</code> - The pathname to the root directory to share, called the share directory.</dd>
<dd><code>fileSystemObserver</code> - The observer of the file system events, which must implement <a href="../../../unimelb/bitbox/util/FileSystemObserver.html" title="interface in unimelb.bitbox.util"><code>FileSystemObserver</code></a>.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - Thrown if an initial scan of the share directory fails.</dd>
<dd><code>java.security.NoSuchAlgorithmException</code> - Thrown if the MD5 hash algorithm is not available.</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="isSafePathName-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isSafePathName</h4>
<pre>public&nbsp;boolean&nbsp;isSafePathName(java.lang.String&nbsp;pathName)</pre>
<div class="block">Returns true if the path name is "safe" to be used.
 Unsafe names should not be used as they may access
 data outside of the share directory.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>pathName</code> - The path name to test for safeness, relative
 to the share directory.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>boolean True if the path name is safe to use, false otherwise
 including if
 there was an IO error accessing the file system.</dd>
</dl>
</li>
</ul>
<a name="dirNameExists-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dirNameExists</h4>
<pre>public&nbsp;boolean&nbsp;dirNameExists(java.lang.String&nbsp;pathName)</pre>
<div class="block">Returns true if the directory name exists.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>pathName</code> - The name of the directory to test for, relative
 to the share directory.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>boolean True if the directory exists.</dd>
</dl>
</li>
</ul>
<a name="makeDirectory-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>makeDirectory</h4>
<pre>public&nbsp;boolean&nbsp;makeDirectory(java.lang.String&nbsp;pathName)</pre>
<div class="block">Attempts to make a directory, the parent of the directory
 must already exist.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>pathName</code> - The name of the directory to make, relative 
 to the share directory.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>boolean True if directory was successfully made.</dd>
</dl>
</li>
</ul>
<a name="deleteDirectory-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>deleteDirectory</h4>
<pre>public&nbsp;boolean&nbsp;deleteDirectory(java.lang.String&nbsp;pathName)</pre>
<div class="block">Attempts to delete a directory, the directory must be
 empty.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>pathName</code> - The name of the directory to delete, relative 
 to the share directory.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>boolean True if the directory was successfully deleted.</dd>
</dl>
</li>
</ul>
<a name="fileNameExists-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fileNameExists</h4>
<pre>public&nbsp;boolean&nbsp;fileNameExists(java.lang.String&nbsp;pathName)</pre>
<div class="block">Test if the file exists, ignoring the contents of the file.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>pathName</code> - The name of the file to test for, relative 
 to the share directory.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>boolean True if the file exists. In the case of
  a file that is being created and currently loading, returns
  false. In the case of a file that is being modified and
  currently loading, returns true.</dd>
</dl>
</li>
</ul>
<a name="fileNameExists-java.lang.String-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fileNameExists</h4>
<pre>public&nbsp;boolean&nbsp;fileNameExists(java.lang.String&nbsp;pathName,
                              java.lang.String&nbsp;md5)</pre>
<div class="block">Test if the file exists and is has matching content.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>pathName</code> - The name of the file to test for, relative 
 to the share directory.</dd>
<dd><code>md5</code> - The MD5 hash of the file's contents to be matched.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>True if the file exists. In the case of
  a file that is being created and currently loading, returns
  false. In the case of a file that is being modified and
  currently loading, returns true against the existing file.</dd>
</dl>
</li>
</ul>
<a name="deleteFile-java.lang.String-long-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>deleteFile</h4>
<pre>public&nbsp;boolean&nbsp;deleteFile(java.lang.String&nbsp;pathName,
                          long&nbsp;lastModified,
                          java.lang.String&nbsp;md5)</pre>
<div class="block">Attempt to delete a file. The file must exist and it must
 have a last modified timestamp less than or equal to that supplied.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>pathName</code> - The name of the file to delete, relative to
 the share directory.</dd>
<dd><code>lastModified</code> - The timestamp to check against.</dd>
<dd><code>md5</code> - The MD5 hash of content to match against.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>boolean True if the file was deleted.</dd>
</dl>
</li>
</ul>
<a name="createFileLoader-java.lang.String-java.lang.String-long-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createFileLoader</h4>
<pre>public&nbsp;boolean&nbsp;createFileLoader(java.lang.String&nbsp;pathName,
                                java.lang.String&nbsp;md5,
                                long&nbsp;length,
                                long&nbsp;lastModified)
                         throws java.security.NoSuchAlgorithmException,
                                java.io.IOException</pre>
<div class="block">Create a file loader for given file name. The file name must not
 already exist, otherwise use <a href="../../../unimelb/bitbox/util/FileSystemManager.html#modifyFileLoader-java.lang.String-java.lang.String-long-"><code>modifyFileLoader(String, String, long)</code></a>.
 The file loader maintains a place holder file with prefix <a href="../../../unimelb/bitbox/util/FileSystemManager.html#loadingSuffix"><code>loadingSuffix</code></a>
 on its filename, called a <i>loader file</i>. Such files never generate file system events. The file loader
 can be subsequently accessed via the given name using <a href="../../../unimelb/bitbox/util/FileSystemManager.html#writeFile-java.lang.String-java.nio.ByteBuffer-long-"><code>writeFile(String, ByteBuffer, long)</code></a>,
 <a href="../../../unimelb/bitbox/util/FileSystemManager.html#checkWriteComplete-java.lang.String-"><code>checkWriteComplete(String)</code></a> and <a href="../../../unimelb/bitbox/util/FileSystemManager.html#checkShortcut-java.lang.String-"><code>checkShortcut(String)</code></a>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>pathName</code> - The name of the file to create, when loading is complete, relative to
 the share directory.</dd>
<dd><code>md5</code> - The MD5 hash of the content that the file contents <i>must</i> match
 for file loading to be considered complete.</dd>
<dd><code>length</code> - The expected length of the file when completed.</dd>
<dd><code>lastModified</code> - The last modified timestamp to use for the file.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>boolean True if the file loader was successfully created.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - if any exceptions arose as the result of accessing the file system.</dd>
<dd><code>java.security.NoSuchAlgorithmException</code> - if the MD5 hash algorithm is not available.</dd>
</dl>
</li>
</ul>
<a name="writeFile-java.lang.String-java.nio.ByteBuffer-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writeFile</h4>
<pre>public&nbsp;boolean&nbsp;writeFile(java.lang.String&nbsp;pathName,
                         java.nio.ByteBuffer&nbsp;src,
                         long&nbsp;position)
                  throws java.io.IOException</pre>
<div class="block">Requests the file loader for the associated file name to write the supplied byte buffer
 at the supplied position in the loader file.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>pathName</code> - The name of the file to which the file loader is associated (no special prefix).</dd>
<dd><code>src</code> - The bytes to be written.</dd>
<dd><code>position</code> - The position to write the bytes.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>True if successfully written, false if there was no associated file loader for the given
 name.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - If there was an error writing the bytes.</dd>
</dl>
</li>
</ul>
<a name="readFile-java.lang.String-long-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readFile</h4>
<pre>public&nbsp;java.nio.ByteBuffer&nbsp;readFile(java.lang.String&nbsp;md5,
                                    long&nbsp;position,
                                    long&nbsp;length)
                             throws java.io.IOException,
                                    java.security.NoSuchAlgorithmException</pre>
<div class="block">Read bytes from any file containing the matching specific content.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>md5</code> - The MD5 hash of the content of the file to read from.</dd>
<dd><code>position</code> - The position in the file to start reading from.</dd>
<dd><code>length</code> - The number of bytes to read.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A <code>ByteBuffer</code> if the bytes are successfully read, otherwise null if 
 there was no such file with that content.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - If there were any problems accessing the file system.</dd>
<dd><code>java.security.NoSuchAlgorithmException</code> - If the MD5 hash algorithm is unavailable.</dd>
</dl>
</li>
</ul>
<a name="checkWriteComplete-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkWriteComplete</h4>
<pre>public&nbsp;boolean&nbsp;checkWriteComplete(java.lang.String&nbsp;pathName)
                           throws java.security.NoSuchAlgorithmException,
                                  java.io.IOException</pre>
<div class="block">Requests the file loader for the associated file name to check if all of the content for the file
 has been written. It does this by checking the MD5 hash of the written bytes to see if
 they match the MD5 hash of the intended file. <b>NOTE:</b> Hashing the file contents is
 time consuming and so this check should not be done often. If the check succeeds then
 the loader file is renamed to the name the file it should be (i.e. without the prefix),
  and the loader is no longer accessible. If a file exists in its intended place at this point
  in time then the file is deleted.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>pathName</code> - The name of the file to check if loading has completed.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>True if the file was completed, false if not and the loader is still waiting for more data.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.security.NoSuchAlgorithmException</code> - If the MD5 hash algorithm is not available, the loader is no longer available in this case.</dd>
<dd><code>java.io.IOException</code> - If there was a problem accessing the file system, the loader is no longer available in this case.</dd>
</dl>
</li>
</ul>
<a name="checkShortcut-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkShortcut</h4>
<pre>public&nbsp;boolean&nbsp;checkShortcut(java.lang.String&nbsp;pathName)
                      throws java.security.NoSuchAlgorithmException,
                             java.io.IOException</pre>
<div class="block">Should be called directly after creating a file loader, but can be called at any time.
 Requests the file loader to check if another file already exists with the same content,
 and if so, uses that file's content (i.e. does a copy) to create the intended file. The
 file loader is then complete and is no longer accessible.
 This is much faster than transferring the bytes of the file
 from a remote source.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>pathName</code> - The name of the file for the associated file loader.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>True if a shortcut was used, false otherwise.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.security.NoSuchAlgorithmException</code> - If the MD5 hash algorithm is not available, the loader is no longer available in this case.</dd>
<dd><code>java.io.IOException</code> - If there were any errors accessing the file system, the loader is no longer available in this case.</dd>
</dl>
</li>
</ul>
<a name="modifyFileLoader-java.lang.String-java.lang.String-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>modifyFileLoader</h4>
<pre>public&nbsp;boolean&nbsp;modifyFileLoader(java.lang.String&nbsp;pathName,
                                java.lang.String&nbsp;md5,
                                long&nbsp;lastModified)
                         throws java.io.IOException</pre>
<div class="block">Called to create a file loader in the case when a file name already exists. The existing
 file must have a last modified timestamp that is less than or equal to the supplied one. See
 <code>#createFileLoader(String, String)</code> for more details about the file loader.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>pathName</code> - The name of the file to modify.</dd>
<dd><code>md5</code> - The MD5 hash of the content that the loaded file <i>must</i> have in order
 for the loading to complete.</dd>
<dd><code>lastModified</code> - The existing file's timestamp must be less than this time stamp
 for the loader to be successfully created.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>True if the loader was successfully created.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - If there were any errors accessing the file system.</dd>
</dl>
</li>
</ul>
<a name="cancelFileLoader-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>cancelFileLoader</h4>
<pre>public&nbsp;boolean&nbsp;cancelFileLoader(java.lang.String&nbsp;pathName)
                         throws java.io.IOException</pre>
<div class="block">Cancel a file loader. Removes the file loader if present, including the loader file.
 No other actions are taken.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>pathName</code> - The name of the file loader, i.e. the associated file it was trying to load.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>True if the file loader existed and was cancelled without problem, false otherwise. The loader is no longer available in any case.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - if there was a problem accessing the file system, the loader is no longer available in this case.</dd>
</dl>
</li>
</ul>
<a name="generateSyncEvents--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>generateSyncEvents</h4>
<pre>public&nbsp;java.util.ArrayList&lt;<a href="../../../unimelb/bitbox/util/FileSystemManager.FileSystemEvent.html" title="class in unimelb.bitbox.util">FileSystemManager.FileSystemEvent</a>&gt;&nbsp;generateSyncEvents()</pre>
<div class="block">Typically called at the beginning of a connection, in order to ensure that
 the remote directory has all of the same contents as the local directory.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A list of file system events that create the entire contents of the
 share directory.</dd>
</dl>
</li>
</ul>
<a name="run--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>run</h4>
<pre>public&nbsp;void&nbsp;run()</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>run</code>&nbsp;in interface&nbsp;<code>java.lang.Runnable</code></dd>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code>run</code>&nbsp;in class&nbsp;<code>java.lang.Thread</code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../unimelb/bitbox/util/Document.html" title="class in unimelb.bitbox.util"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../unimelb/bitbox/util/FileSystemManager.EVENT.html" title="enum in unimelb.bitbox.util"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?unimelb/bitbox/util/FileSystemManager.html" target="_top">Frames</a></li>
<li><a href="FileSystemManager.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
